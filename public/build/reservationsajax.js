(self["webpackChunk"] = self["webpackChunk"] || []).push([["reservationsajax"],{

/***/ "./assets/js/reservationsajax.js":
/*!***************************************!*\
  !*** ./assets/js/reservationsajax.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

__webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");

__webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");

__webpack_require__(/*! core-js/modules/es.array.index-of.js */ "./node_modules/core-js/modules/es.array.index-of.js");

__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");

__webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");

__webpack_require__(/*! core-js/modules/es.parse-int.js */ "./node_modules/core-js/modules/es.parse-int.js");

__webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");

__webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");

__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");

__webpack_require__(/*! core-js/modules/es.function.name.js */ "./node_modules/core-js/modules/es.function.name.js");

__webpack_require__(/*! core-js/modules/es.date.to-string.js */ "./node_modules/core-js/modules/es.date.to-string.js");

var hotel = document.querySelector('#hID');
var suites = document.querySelector('#sID');
var price = document.querySelector('#price');
var startDate = document.querySelector('#startDate');
var endDate = document.querySelector('#endDate');
var nPrice = document.querySelector('#nPrice');
var endListener = document.querySelectorAll('.endListener');
var iBtn = document.querySelector('#iBtn');
var okBtn = document.querySelector('#okBtn');
var sDate;
var eDate;
okBtn.disabled = true;
iBtn.style.display = 'none';
suites.style.display = 'none';
var localUrl = window.location.href;
var prefillFields = localUrl.includes("/neww");

if (!prefillFields) {
  axiosSuitesRequest();
} else {
  //get ids by url
  var _hid = localUrl.substr(localUrl.indexOf('/new') + 12, 3);

  var suiteId = localUrl.substr(localUrl.length - 3, 3);

  var indexOfId = _hid.indexOf('/');

  if (indexOfId !== -1) {
    _hid = _hid.replace('/', '');
  }

  var indexOfSId = suiteId.indexOf('/');

  if (indexOfId !== -1) {
    suiteId = suiteId.replace('/', '');
  }

  _hid = parseInt(_hid);
  suiteId = parseInt(suiteId);
  var url = "/reservation/getsuite/" + _hid;
  axios.get(url).then(function (response) {
    var suiteList = response.data.suites;
    suites.style.display = 'inline-block';
    suites.innerHTML = '';
    var sOpt = document.createElement('option');
    sOpt.innerHTML = 'Suite';
    suites.appendChild(sOpt);
    suiteList.forEach(function (e) {
      var opt = document.createElement('option');
      opt.className = e.price;
      opt.value = e.id;
      opt.id = e.id;
      opt.innerHTML = e.name; //select suite by id

      console.log(suiteId);

      if (e.id === suiteId) {
        opt.defaultSelected = true;
      }

      suites.appendChild(opt);
    });
  }); //select hotel by id

  for (var i = 0; i < hotel.options.length; i++) {
    if (hotel[i].value === _hid) {
      hotel[i].defaultSelected = true;
    }
  }

  axiosSuitesRequest();
}

endListener.forEach(function (item) {
  item.addEventListener('change', function (event) {
    sDate = new Date(startDate.value);
    eDate = new Date(endDate.value);
    var diffTime = Math.abs(eDate - sDate);
    var diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    var priceOf = parseInt(suites.children[suites.selectedIndex].className);

    if (!isNaN(diffDays) && sDate <= eDate) {
      var sId = suites.children[suites.selectedIndex].id;

      var _url = '/reservation/getdispo/' + sId;

      axios.post(_url, {
        'startDate': sDate,
        'endDate': eDate,
        'suiteId': sId
      }).then(function (response) {
        var data = response.data;
        var isAvailable = data.isAvailable;

        if (isAvailable) {
          okBtn.disabled = true;
          okBtn.style.display = 'none';
          iBtn.disabled = true;
          iBtn.style.display = 'inline-block';
        } else {
          okBtn.disabled = false;
          okBtn.style.display = 'inline-block';
          iBtn.style.display = 'none';
        }
      })["catch"](function (err) {
        console.log(err);
      });
      price.textContent = priceOf * diffDays + '$ ';
    } else {
      price.textContent = 'Vous devez remplir correctement les dates ';
    }

    nPrice.textContent = priceOf + '$';
  });
});

function axiosSuitesRequest() {
  hotel.addEventListener('change', function (event) {
    event.preventDefault();

    if (typeof hid == 'undefined') {
      var _hid2 = 0;
    }

    hid = hotel.value;
    var url = "/reservation/getsuite/" + hid;
    axios.get(url).then(function (response) {
      var suiteList = response.data.suites;
      suites.style.display = 'inline-block';
      suites.innerHTML = '';
      var sOpt = document.createElement('option');
      sOpt.innerHTML = 'Suite';
      suites.appendChild(sOpt);
      suiteList.forEach(function (e) {
        var opt = document.createElement('option');
        opt.className = e.price;
        opt.value = e.id;
        opt.id = e.id;
        opt.innerHTML = e.name;
        suites.appendChild(opt);
      });
    });
  });
}

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendors-node_modules_core-js_internals_array-iteration_js-node_modules_core-js_internals_dom--711a0d","vendors-node_modules_core-js_modules_es_array_for-each_js-node_modules_core-js_modules_es_arr-f2c345"], () => (__webpack_exec__("./assets/js/reservationsajax.js")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dXJjZXNDb250ZW50IjpbImxldCBob3RlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoSUQnKTtcclxubGV0IHN1aXRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzSUQnKTtcclxubGV0IHByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaWNlJyk7XHJcbmxldCBzdGFydERhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RhcnREYXRlJyk7XHJcbmxldCBlbmREYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VuZERhdGUnKTtcclxubGV0IG5QcmljZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuUHJpY2UnKTtcclxubGV0IGVuZExpc3RlbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVuZExpc3RlbmVyJyk7XHJcbmxldCBpQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2lCdG4nKTtcclxubGV0IG9rQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29rQnRuJyk7XHJcbmxldCBzRGF0ZTtcclxubGV0IGVEYXRlO1xyXG5va0J0bi5kaXNhYmxlZCA9IHRydWU7XHJcbmlCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuc3VpdGVzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblxyXG5sZXQgbG9jYWxVcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxubGV0IHByZWZpbGxGaWVsZHMgPSBsb2NhbFVybC5pbmNsdWRlcyhcIi9uZXd3XCIpO1xyXG5cclxuaWYgKCFwcmVmaWxsRmllbGRzKSB7XHJcbiAgICBheGlvc1N1aXRlc1JlcXVlc3QoKTtcclxufSBlbHNlIHtcclxuICAgLy9nZXQgaWRzIGJ5IHVybFxyXG4gICAgbGV0IGhpZCA9IGxvY2FsVXJsLnN1YnN0cihsb2NhbFVybC5pbmRleE9mKCcvbmV3JykgKyAxMiwgMylcclxuICAgIGxldCBzdWl0ZUlkID0gbG9jYWxVcmwuc3Vic3RyKGxvY2FsVXJsLmxlbmd0aCAtIDMsIDMpO1xyXG4gICAgbGV0IGluZGV4T2ZJZCA9IGhpZC5pbmRleE9mKCcvJyk7XHJcbiAgICBpZiAoaW5kZXhPZklkICE9PSAoLTEpKSB7XHJcbiAgICAgICAgaGlkID0gaGlkLnJlcGxhY2UoJy8nLCAnJylcclxuICAgIH1cclxuICAgIGxldCBpbmRleE9mU0lkID0gc3VpdGVJZC5pbmRleE9mKCcvJyk7XHJcbiAgICBpZiAoaW5kZXhPZklkICE9PSAoLTEpKSB7XHJcbiAgICAgICAgc3VpdGVJZCA9IHN1aXRlSWQucmVwbGFjZSgnLycsICcnKTtcclxuICAgIH1cclxuICAgIGhpZD0gcGFyc2VJbnQoaGlkKTtcclxuICAgIHN1aXRlSWQ9cGFyc2VJbnQoc3VpdGVJZCk7XHJcbiAgICBsZXQgdXJsID0gXCIvcmVzZXJ2YXRpb24vZ2V0c3VpdGUvXCIgKyBoaWQ7XHJcbiAgICBheGlvcy5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgIGNvbnN0IHN1aXRlTGlzdCA9IHJlc3BvbnNlLmRhdGEuc3VpdGVzO1xyXG4gICAgICAgIHN1aXRlcy5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XHJcbiAgICAgICAgc3VpdGVzLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGxldCBzT3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgc09wdC5pbm5lckhUTUwgPSAnU3VpdGUnXHJcbiAgICAgICAgc3VpdGVzLmFwcGVuZENoaWxkKHNPcHQpO1xyXG5cclxuICAgICAgICBzdWl0ZUxpc3QuZm9yRWFjaChlID0+IHtcclxuICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgICAgICBvcHQuY2xhc3NOYW1lID0gZS5wcmljZTtcclxuICAgICAgICAgICAgb3B0LnZhbHVlID0gZS5pZDtcclxuICAgICAgICAgICAgb3B0LmlkID0gZS5pZDtcclxuICAgICAgICAgICAgb3B0LmlubmVySFRNTCA9IGUubmFtZTtcclxuLy9zZWxlY3Qgc3VpdGUgYnkgaWRcclxuICAgICAgICAgICAgY29uc29sZS5sb2coc3VpdGVJZCk7XHJcbiAgICAgICAgICAgIGlmKGUuaWQgPT09IHN1aXRlSWQpe1xyXG4gICAgICAgICAgICAgICAgb3B0LmRlZmF1bHRTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN1aXRlcy5hcHBlbmRDaGlsZChvcHQpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLy9zZWxlY3QgaG90ZWwgYnkgaWRcclxuICAgIGZvcihsZXQgaSA9IDAgOyBpPGhvdGVsLm9wdGlvbnMubGVuZ3RoOyBpKysgKXtcclxuICAgICAgICBpZihob3RlbFtpXS52YWx1ZSA9PT0gaGlkKXtcclxuICAgICAgICAgICAgaG90ZWxbaV0uZGVmYXVsdFNlbGVjdGVkPXRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXhpb3NTdWl0ZXNSZXF1ZXN0KCk7XHJcbn1cclxuXHJcbmVuZExpc3RlbmVyLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHNEYXRlID0gbmV3IERhdGUoc3RhcnREYXRlLnZhbHVlKTtcclxuICAgICAgICBlRGF0ZSA9IG5ldyBEYXRlKGVuZERhdGUudmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IGRpZmZUaW1lID0gTWF0aC5hYnMoZURhdGUgLSBzRGF0ZSk7XHJcbiAgICAgICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmNlaWwoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xyXG4gICAgICAgIGxldCBwcmljZU9mID0gcGFyc2VJbnQoc3VpdGVzLmNoaWxkcmVuW3N1aXRlcy5zZWxlY3RlZEluZGV4XS5jbGFzc05hbWUpXHJcbiAgICAgICAgaWYgKCFpc05hTihkaWZmRGF5cykgJiYgKHNEYXRlIDw9IGVEYXRlKSkge1xyXG5cclxuICAgICAgICAgICAgbGV0IHNJZCA9IHN1aXRlcy5jaGlsZHJlbltzdWl0ZXMuc2VsZWN0ZWRJbmRleF0uaWQ7XHJcbiAgICAgICAgICAgIGxldCB1cmwgPSAnL3Jlc2VydmF0aW9uL2dldGRpc3BvLycgKyBzSWQ7XHJcbiAgICAgICAgICAgIGF4aW9zLnBvc3QodXJsLCB7XHJcbiAgICAgICAgICAgICAgICAnc3RhcnREYXRlJzogc0RhdGUsXHJcbiAgICAgICAgICAgICAgICAnZW5kRGF0ZSc6IGVEYXRlLFxyXG4gICAgICAgICAgICAgICAgJ3N1aXRlSWQnOiBzSWRcclxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGxldCBkYXRhID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgICAgICAgIGxldCBpc0F2YWlsYWJsZSA9IGRhdGEuaXNBdmFpbGFibGU7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNBdmFpbGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBva0J0bi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgb2tCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICBpQnRuLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpQnRuLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2tCdG4uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBva0J0bi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XHJcbiAgICAgICAgICAgICAgICAgICAgaUJ0bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgcHJpY2UudGV4dENvbnRlbnQgPSBwcmljZU9mICogZGlmZkRheXMgKyAnJCAnO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwcmljZS50ZXh0Q29udGVudCA9ICdWb3VzIGRldmV6IHJlbXBsaXIgY29ycmVjdGVtZW50IGxlcyBkYXRlcyAnXHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5QcmljZS50ZXh0Q29udGVudCA9IHByaWNlT2YgKyAnJCc7XHJcbiAgICB9KVxyXG5cclxuXHJcbn0pXHJcblxyXG5mdW5jdGlvbiBheGlvc1N1aXRlc1JlcXVlc3QoKSB7XHJcbiAgICBob3RlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgaGlkID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIGxldCBoaWQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBoaWQgPSBob3RlbC52YWx1ZTtcclxuICAgICAgICBsZXQgdXJsID0gXCIvcmVzZXJ2YXRpb24vZ2V0c3VpdGUvXCIgKyBoaWQ7XHJcbiAgICAgICAgYXhpb3MuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3VpdGVMaXN0ID0gcmVzcG9uc2UuZGF0YS5zdWl0ZXM7XHJcbiAgICAgICAgICAgIHN1aXRlcy5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XHJcbiAgICAgICAgICAgIHN1aXRlcy5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgbGV0IHNPcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICAgICAgc09wdC5pbm5lckhUTUwgPSAnU3VpdGUnO1xyXG4gICAgICAgICAgICBzdWl0ZXMuYXBwZW5kQ2hpbGQoc09wdCk7XHJcbiAgICAgICAgICAgIHN1aXRlTGlzdC5mb3JFYWNoKGUgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICAgICAgICAgIG9wdC5jbGFzc05hbWUgPSBlLnByaWNlO1xyXG4gICAgICAgICAgICAgICAgb3B0LnZhbHVlID0gZS5pZDtcclxuICAgICAgICAgICAgICAgIG9wdC5pZCA9IGUuaWQ7XHJcbiAgICAgICAgICAgICAgICBvcHQuaW5uZXJIVE1MID0gZS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgc3VpdGVzLmFwcGVuZENoaWxkKG9wdCk7XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxuXHJcbn0iXSwibmFtZXMiOlsiaG90ZWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdWl0ZXMiLCJwcmljZSIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJuUHJpY2UiLCJlbmRMaXN0ZW5lciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpQnRuIiwib2tCdG4iLCJzRGF0ZSIsImVEYXRlIiwiZGlzYWJsZWQiLCJzdHlsZSIsImRpc3BsYXkiLCJsb2NhbFVybCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsInByZWZpbGxGaWVsZHMiLCJpbmNsdWRlcyIsImF4aW9zU3VpdGVzUmVxdWVzdCIsImhpZCIsInN1YnN0ciIsImluZGV4T2YiLCJzdWl0ZUlkIiwibGVuZ3RoIiwiaW5kZXhPZklkIiwicmVwbGFjZSIsImluZGV4T2ZTSWQiLCJwYXJzZUludCIsInVybCIsImF4aW9zIiwiZ2V0IiwidGhlbiIsInJlc3BvbnNlIiwic3VpdGVMaXN0IiwiZGF0YSIsImlubmVySFRNTCIsInNPcHQiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJmb3JFYWNoIiwiZSIsIm9wdCIsImNsYXNzTmFtZSIsInZhbHVlIiwiaWQiLCJuYW1lIiwiY29uc29sZSIsImxvZyIsImRlZmF1bHRTZWxlY3RlZCIsImkiLCJvcHRpb25zIiwiaXRlbSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsIkRhdGUiLCJkaWZmVGltZSIsIk1hdGgiLCJhYnMiLCJkaWZmRGF5cyIsImNlaWwiLCJwcmljZU9mIiwiY2hpbGRyZW4iLCJzZWxlY3RlZEluZGV4IiwiaXNOYU4iLCJzSWQiLCJwb3N0IiwiaXNBdmFpbGFibGUiLCJlcnIiLCJ0ZXh0Q29udGVudCIsInByZXZlbnREZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==